"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=t(e);exports.Field=function({control:t,name:n,rules:a,children:s,defaultValue:l}){const{register:i,setValue:o}=t;e.useEffect((()=>{i(n,a,l),l&&o(n,l)}),[]);const u=t?.values?.[n],d=t?.onChange(n,a),m=t?.onBlur(n,a);return r.default.createElement(e.Fragment,null,s?.({onChange:d,value:u,name:n,onBlur:m}))},exports.joiResolver=e=>({result:[],resolve:function(t){const{error:r}=e.validate(t,{abortEarly:!1});if(r)return this.result=r.details.map((({message:e,path:t})=>({message:e,path:t.join(".")}))),this},getFilteredErrors:function(e){return this.result.find((t=>t?.path===e))?.message}}),exports.useForm=function({validationSchema:t,defaultValues:r={}}={}){const[n,a]=e.useState(r),[s,l]=e.useState({}),[i,o]=e.useState({}),u=(e,r,n)=>{const a=t?t?.resolve({[e]:r})?.getFilteredErrors(e):((e,t,r)=>{let n=null;return r?.required&&(n=!t&&`Field ${e} is required`),r?.pattern&&(n=!r?.pattern.test(t)&&`Field ${e} is invalid`),!n&&r?.min&&r?.max&&(n=(Number(t)<r?.min||Number(t)>r?.max)&&`Field ${e} must be between ${r?.min} and ${r?.max}`),!n&&r?.min&&(n=Number(t)<r?.min&&`Field ${e} is too short`),!n&&r?.max&&(n=Number(t)>r?.max&&`Field ${e} is too long`),!n&&r?.minLength&&r?.maxLength&&(n=(t?.length<r?.minLength||t?.length>r?.maxLength)&&`Field ${e} must be between ${r?.minLength} and ${r?.maxLength}`),!n&&r?.minLength&&(n=t?.length<r?.minLength&&`Field ${e} is too short`),!n&&r?.maxLength&&(n=t?.length>r?.maxLength&&`Field ${e} is too long`),!n&&r?.validate&&(n=r?.validate?.(t)),n})(e,r,n);o((t=>{return r={...t,[e]:a},Object.keys(r).filter((e=>void 0!==r[e]&&null!==r[e]&&""!==r[e])).reduce(((e,t)=>({...e,[t]:r[t]})),{});var r}))},d=(e,t)=>r=>m(e,t,r),m=(e,t,r)=>{a((t=>({...t,[e]:r}))),u(e,r,t)};return{register:(e,t,r)=>(!n?.hasOwnProperty(e)&&a((t=>({...t,[e]:r}))),!s?.hasOwnProperty(e)&&l((r=>({...r,[e]:t||{}}))),{value:n?.[e]||"",onChange:r=>m?.(e,t,r?.target?.value),onBlur:r=>m?.(e,t,r?.target?.value)}),unRegister:e=>{"string"==typeof e&&a((({name:e,...t})=>({...t}))),Array.isArray(e)&&a((t=>{return r=t,n=e,Object.fromEntries(Object.entries(r).filter((([e])=>!n.includes(e))));var r,n}))},values:n,setValue:(e,t,r={shouldValidate:!0})=>{a((r=>({...r,[e]:t}))),r?.shouldValidate&&u(e,t,s?.[e])},getValues:e=>e?n?.[e]:n,errors:i,setErrors:o,setError:(e,t)=>o((r=>({...r,[e]:t}))),getError:e=>i?.[e],clearError:e=>o((t=>{const r={...t};return delete r[e],r})),reset:(e={})=>{a((t=>r||{...Object.keys(t).reduce(((e,t)=>({...e,[t]:""})),{}),...e})),o({})},trigger:e=>{"string"==typeof e?u(e,n[e],s[e]):Array.isArray(e)?e.forEach((e=>u(e,n[e],s[e]))):Object.keys(n).forEach((e=>u(e,n[e],s[e])))},onChange:d,onBlur:d,handleSubmit:e=>()=>{Object.keys(n).forEach((e=>{u(e,n[e],s[e])})),Object.values(i).every((e=>!e))&&e(n)}}};
